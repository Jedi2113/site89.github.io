<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Create Anomaly  Site-89</title>
  <link rel="stylesheet" href="/assets/css/main.css">
  <script type="module">
    import { ThemeManager } from '/assets/js/theme.js';
    ThemeManager.init();
  </script>
  <style>
    .an-form-shell{max-width:1100px;margin:1.5rem auto;padding:1.25rem;background:var(--bg-card);border:1px solid rgba(255,255,255,0.06);border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,0.25)}
    .an-form-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
    .an-field{display:flex;flex-direction:column;gap:.35rem}
    .an-field label{font-weight:700;letter-spacing:.3px}
    .an-field input,.an-field select,.an-field textarea{padding:.65rem .8rem;border-radius:8px;border:1px solid rgba(255,255,255,0.12);background:rgba(255,255,255,0.02);color:var(--text)}
    .an-field textarea{min-height:160px;font-family:var(--font-mono)}
    /* Animated mint-on-gray selects */
    .an-field select{appearance:none;-webkit-appearance:none;-moz-appearance:none;background:linear-gradient(145deg,rgba(31,33,37,0.95),rgba(18,20,24,0.95));border:1px solid rgba(78,250,170,0.28);color:#e5e5e5;padding-right:2.8rem;box-shadow:0 6px 20px rgba(0,0,0,0.25);transition:transform .18s ease,box-shadow .18s ease,border-color .18s ease}
    .an-field select:focus{outline:none;border-color:#4EFAAA;box-shadow:0 0 0 3px rgba(78,250,170,0.22),0 10px 28px rgba(0,0,0,0.35);transform:translateY(-1px)}
    .an-field select:hover{border-color:#4EFAAA;box-shadow:0 6px 24px rgba(0,0,0,0.28)}
    .an-field select::-ms-expand{display:none}
    .an-field select{background-repeat:no-repeat;background-position:calc(100% - 24px) 54%,calc(100% - 16px) 54%;background-size:8px 8px,8px 8px;background-image:linear-gradient(45deg,transparent 50%,#4EFAAA 50%),linear-gradient(135deg,#4EFAAA 50%,transparent 50%)}
    .pill-bar{display:flex;gap:.5rem;flex-wrap:wrap}
    .pill-badge{padding:.35rem .6rem;border-radius:999px;font-weight:700;border:1px solid rgba(255,255,255,0.12);background:rgba(255,255,255,0.04);font-size:.9rem}
    .preview-card{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.06);border-radius:10px;padding:1rem;min-height:140px}
    .preview-card h4{margin-top:0}
    .an-actions{display:flex;gap:.75rem;align-items:center;flex-wrap:wrap}
    .btn-primary{background:linear-gradient(90deg,var(--accent-mint),var(--accent-teal));border:none;color:#082019;font-weight:800;padding:.75rem 1.25rem;border-radius:10px;cursor:pointer}
    .btn-secondary{background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.14);color:var(--text);font-weight:700;padding:.7rem 1.2rem;border-radius:10px;cursor:pointer}
    .status{min-height:1.4rem;color:var(--text-light)}
    .hero-head{display:flex;justify-content:space-between;gap:1rem;align-items:flex-start;margin-top:1rem}
    .hero-head h1{margin:0;font-size:1.8rem}
    .hero-meta{color:var(--text-light);opacity:.9}
    @media (max-width:900px){.an-form-grid{grid-template-columns:1fr}.hero-head{flex-direction:column}}
  </style>
</head>
<body>
  <div data-include="/components/header.html"></div>
  <div data-include="/components/navbar.html"></div>

  <main class="content">
    <div class="hero-head">
      <div>
        <div class="page-identifier">ANOMALY AUTHORING</div>
        <h1>Create or Edit an Anomaly</h1>
        <p class="hero-meta">Markdown is supported for procedures and description. Required fields keep our formatting consistent.</p>
      </div>
      <div class="pill-bar">
        <span class="pill-badge">Containment Class</span>
        <span class="pill-badge">Risk Class</span>
        <span class="pill-badge">Disruption Class</span>
      </div>
    </div>

    <div class="an-form-shell">
      <form id="anomalyForm" class="an-form">
        <div class="an-form-grid">
          <div class="an-field">
            <label for="itemNumber">Item Number (SCP-000)</label>
            <input id="itemNumber" name="itemNumber" placeholder="SCP-131" required>
            <small class="hero-meta">Use the SCP prefix; we will keep it normalized.</small>
          </div>
          <div class="an-field">
            <label for="photoUrl">Photo URL (optional)</label>
            <input id="photoUrl" name="photoUrl" placeholder="https://...">
          </div>
        </div>

        <div class="an-form-grid">
          <div class="an-field">
            <label for="containmentClass">Containment Class</label>
            <select id="containmentClass" name="containmentClass" required>
              <option value="">Select</option>
              <option>Safe</option>
              <option>Euclid</option>
              <option>Keter</option>
              <option>Thaumiel</option>
              <option>Neutralized</option>
              <option>Explained</option>
            </select>
          </div>
          <div class="an-field">
            <label for="riskClass">Risk Class</label>
            <select id="riskClass" name="riskClass" required>
              <option value="">Select</option>
              <option>Notice</option>
              <option>Caution</option>
              <option>Warning</option>
              <option>Danger</option>
              <option>Critical</option>
            </select>
          </div>
          <div class="an-field">
            <label for="disruptionClass">Disruption Class</label>
            <select id="disruptionClass" name="disruptionClass" required>
              <option value="">Select</option>
              <option>Dark</option>
              <option>Vlam</option>
              <option>Keneq</option>
              <option>Ekhi</option>
              <option>Amida</option>
            </select>
          </div>
          <div class="an-field">
            <label for="clearanceLevel">Viewing Clearance Required</label>
            <select id="clearanceLevel" name="clearanceLevel" required>
              <option value="">Select</option>
              <option value="1">Level 1 (Intern)</option>
              <option value="2">Level 2</option>
              <option value="3">Level 3</option>
              <option value="4">Level 4</option>
              <option value="5">Level 5</option>
            </select>
            <small class="hero-meta">Viewers must meet or exceed this clearance.</small>
          </div>
        </div>

        <div class="an-form-grid">
          <div class="an-field">
            <label for="procedures">Special Containment Procedures (Markdown)</label>
            <textarea id="procedures" name="procedures" placeholder="Detail the containment procedures..." required></textarea>
          </div>
          <div class="an-field">
            <label>Procedures Preview</label>
            <div class="preview-card" id="proceduresPreview">Formatted output appears here.</div>
          </div>
        </div>

        <div class="an-form-grid">
          <div class="an-field">
            <label for="description">Description (Markdown)</label>
            <textarea id="description" name="description" placeholder="Describe the anomaly..." required></textarea>
          </div>
          <div class="an-field">
            <label>Description Preview</label>
            <div class="preview-card" id="descriptionPreview">Formatted output appears here.</div>
          </div>
        </div>

        <div class="an-actions">
          <button type="button" class="btn-secondary" id="loadBtn">Load Existing</button>
          <button type="submit" class="btn-primary">Save Anomaly</button>
          <span class="status" id="formStatus"></span>
        </div>
      </form>
    </div>
  </main>

  <div data-include="/components/footer.html"></div>

  <script src="/assets/js/include.js"></script>
  <script type="module" src="/assets/js/auth.js"></script>
  <script type="module" src="/assets/js/anomaly-form.js"></script>
</body>
</html>
